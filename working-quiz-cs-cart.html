<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Any-Home Quiz - CS-Cart Version</title>
    <style>
        /* CS-Cart –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        .anyhome-quiz-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 9999;
            display: none;
            align-items: center;
            justify-content: center;
        }

        .anyhome-quiz-container {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin: 20px;
            position: relative;
        }

        .anyhome-quiz-header {
            background: linear-gradient(135deg, #C9A961 0%, #A08950 100%);
            padding: 20px;
            color: white;
            text-align: center;
            position: relative;
        }

        .anyhome-quiz-header h2 {
            margin: 0;
            font-size: 24px;
            font-weight: 300;
        }

        .anyhome-quiz-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .anyhome-quiz-close:hover {
            opacity: 1;
        }

        .anyhome-quiz-content {
            padding: 30px;
            max-height: 70vh;
            overflow-y: auto;
        }

        .anyhome-quiz-step {
            display: none;
        }

        .anyhome-quiz-step.active {
            display: block;
        }

        .anyhome-quiz-step h2 {
            color: #1A1A1A;
            margin-bottom: 15px;
            font-size: 28px;
            font-weight: 300;
            text-align: center;
        }

        .anyhome-quiz-step p {
            color: #666666;
            margin-bottom: 25px;
            text-align: center;
            line-height: 1.6;
        }

        .anyhome-quiz-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        .anyhome-quiz-option-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .anyhome-quiz-option-card:hover {
            border-color: #C9A961;
            transform: translateY(-2px);
        }

        .anyhome-quiz-option-card.selected {
            background: rgba(201, 169, 97, 0.1);
            border-color: #C9A961;
        }

        .anyhome-quiz-option-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .anyhome-quiz-option-text {
            font-size: 16px;
            font-weight: 500;
            color: #1A1A1A;
        }

        /* –ú–æ–±–∏–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –±–ª–æ–∫–∞ –∫–æ–º–Ω–∞—Ç */
        .anyhome-quiz-options-mobile {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .anyhome-quiz-option-card.compact {
            padding: 12px 8px;
            border-radius: 8px;
        }

        .anyhome-quiz-option-card.compact .anyhome-quiz-option-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .anyhome-quiz-option-card.compact .anyhome-quiz-option-text {
            font-size: 12px;
            font-weight: 500;
        }

        .anyhome-quiz-form {
            margin-bottom: 30px;
            width: 100%;
        }

        .anyhome-quiz-form-group {
            margin-bottom: 20px;
        }

        .anyhome-quiz-form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #1A1A1A;
        }

        .anyhome-quiz-form-group input,
        .anyhome-quiz-form-group select {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 16px;
            background: #f8f9fa;
            box-sizing: border-box;
            margin-bottom: 0;
            transition: all 0.3s ease;
        }

        .anyhome-quiz-form-group input:focus,
        .anyhome-quiz-form-group select:focus {
            outline: none;
            border-color: #C9A961;
            background: white;
            box-shadow: 0 0 0 3px rgba(201, 169, 97, 0.1);
        }

        .anyhome-quiz-navigation {
            display: flex;
            gap: 15px;
            justify-content: center;
        }

        .anyhome-quiz-btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .anyhome-quiz-btn.primary {
            background: linear-gradient(135deg, #C9A961 0%, #A08950 100%);
            color: white;
        }

        .anyhome-quiz-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(201, 169, 97, 0.3);
        }

        .anyhome-quiz-btn.secondary {
            background: #f8f9fa;
            color: #666666;
            border: 2px solid #e9ecef;
        }

        .anyhome-quiz-btn.secondary:hover {
            background: #e9ecef;
        }

        .anyhome-quiz-progress {
            width: 100%;
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .anyhome-quiz-progress-bar {
            height: 100%;
            background: linear-gradient(135deg, #C9A961 0%, #A08950 100%);
            transition: width 0.3s ease;
            width: 0%;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –º–µ–±–µ–ª–∏ */
        .anyhome-quiz-category-section {
            margin-bottom: 25px;
        }

        .anyhome-quiz-category-title {
            font-size: 18px;
            font-weight: 600;
            color: #1A1A1A;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid #C9A961;
        }

        .anyhome-quiz-checkbox-group {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .anyhome-quiz-checkbox-item {
            display: flex;
            align-items: center;
            padding: 12px;
            margin-bottom: 8px;
            border-radius: 8px;
            transition: background 0.3s ease;
        }

        .anyhome-quiz-checkbox-item:hover {
            background: #f8f9fa;
        }

        .anyhome-quiz-checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            cursor: pointer;
            accent-color: #C9A961;
        }

        .anyhome-quiz-checkbox-item label {
            cursor: pointer;
            flex: 1;
            color: #1A1A1A;
        }

        /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–µ–±–µ–ª–∏ */
        .anyhome-quiz-category-section.compact {
            margin-bottom: 15px;
        }

        .anyhome-quiz-category-title.compact {
            font-size: 14px;
            margin-bottom: 8px;
            padding-bottom: 4px;
        }

        .anyhome-quiz-checkbox-group.compact {
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
        }

        .anyhome-quiz-checkbox-item.compact {
            padding: 8px;
            margin-bottom: 4px;
        }

        .anyhome-quiz-checkbox-item.compact input[type="checkbox"] {
            width: 16px;
            height: 16px;
            margin-right: 8px;
        }

        .anyhome-quiz-checkbox-item.compact label {
            font-size: 12px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –º–µ–±–µ–ª–∏ */
        .anyhome-quiz-furniture-mobile {
            margin-bottom: 20px;
        }

        .anyhome-quiz-furniture-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 15px;
        }

        .anyhome-quiz-furniture-card {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .anyhome-quiz-furniture-card:hover {
            border-color: #C9A961;
            transform: translateY(-2px);
        }

        .anyhome-quiz-furniture-card.selected {
            background: rgba(201, 169, 97, 0.1);
            border-color: #C9A961;
        }

        .anyhome-quiz-furniture-icon {
            font-size: 16px;
            margin-bottom: 4px;
        }

        .anyhome-quiz-furniture-text {
            font-size: 10px;
            font-weight: 500;
            color: #1A1A1A;
            line-height: 1.2;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∏–ª–µ–π –∏–Ω—Ç–µ—Ä—å–µ—Ä–∞ */
        .anyhome-quiz-style-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 25px;
        }

        .anyhome-quiz-style-card {
            border: 2px solid #E0E0E0;
            border-radius: 10px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            background: white;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .anyhome-quiz-style-card:hover {
            border-color: #C9A961;
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(201, 169, 97, 0.2);
        }

        .anyhome-quiz-style-card.selected {
            border-color: #C9A961;
            background: linear-gradient(135deg, rgba(201, 169, 97, 0.05) 0%, rgba(201, 169, 97, 0.1) 100%);
            box-shadow: 0 4px 15px rgba(201, 169, 97, 0.3);
        }

        .anyhome-quiz-style-image {
            width: 100%;
            height: 50px;
            background: linear-gradient(135deg, #f8f9fa, #E0E0E0);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 8px;
        }

        .anyhome-quiz-style-name {
            font-size: 14px;
            font-weight: 600;
            color: #1A1A1A;
            margin-bottom: 4px;
        }

        .anyhome-quiz-style-desc {
            font-size: 11px;
            color: #666666;
            line-height: 1.2;
            flex: 1;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —ç–∫—Ä–∞–Ω–∞ —É—Å–ø–µ—Ö–∞ */
        .anyhome-quiz-success-message {
            text-align: center;
            padding: 40px 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .anyhome-quiz-success-icon {
            font-size: 80px;
            margin-bottom: 30px;
            color: #C9A961;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .anyhome-quiz-success-message h2 {
            color: #1A1A1A;
            margin-bottom: 15px;
            font-size: 36px;
            font-weight: 300;
        }

        .anyhome-quiz-success-message p {
            color: #666666;
            margin-bottom: 25px;
            font-size: 16px;
            line-height: 1.6;
        }

        /* –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ —Å–≤—è–∑–∏ */
        .anyhome-quiz-contact-method-buttons {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }

        .anyhome-quiz-contact-method-btn {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #E8E0D0;
            background: white;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .anyhome-quiz-contact-method-btn.active {
            border-color: #C9A961;
            background: rgba(201, 169, 97, 0.1);
            color: #C9A961;
        }

        .anyhome-quiz-contact-method-btn:hover {
            border-color: #C9A961;
        }

        /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ */
        .anyhome-quiz-action-buttons {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .anyhome-quiz-action-btn {
            flex: 1;
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .anyhome-quiz-action-btn.whatsapp-btn {
            background: #25D366;
            color: white;
        }

        .anyhome-quiz-action-btn.whatsapp-btn:hover {
            background: #128C7E;
        }

        .anyhome-quiz-action-btn.call-btn {
            background: #C9A961;
            color: white;
        }

        .anyhome-quiz-action-btn.call-btn:hover {
            background: #A08950;
        }

        /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è —ç–∫—Ä–∞–Ω–∞ —É—Å–ø–µ—Ö–∞ */
        .anyhome-quiz-success-message.compact {
            padding: 20px;
            max-width: 400px;
            margin: 0 auto;
        }

        .anyhome-quiz-success-description {
            color: #666;
            margin-bottom: 20px;
            font-size: 15px;
            line-height: 1.4;
        }

        .anyhome-quiz-compact-process {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }

        .anyhome-quiz-compact-item {
            margin-bottom: 8px;
            font-size: 13px;
            color: #333;
            line-height: 1.3;
        }

        .anyhome-quiz-compact-item:last-child {
            margin-bottom: 0;
        }

        .anyhome-quiz-compact-contact {
            background: white;
            border: 1px solid #E8E0D0;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }

        .anyhome-quiz-compact-contact div {
            margin-bottom: 6px;
            font-size: 13px;
            color: #333;
            line-height: 1.3;
        }

        .anyhome-quiz-compact-contact div:last-child {
            margin-bottom: 0;
        }

        .anyhome-quiz-compact-contact strong {
            color: #C9A961;
        }

        .anyhome-quiz-compact-actions {
            margin: 20px 0;
        }

        .anyhome-quiz-success-footer {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #E8E0D0;
        }

        .anyhome-quiz-footer-text {
            font-size: 12px;
            color: #999;
            text-align: center;
            margin-bottom: 15px;
        }

        /* –ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ */
        .anyhome-quiz-welcome-header {
            text-align: center;
            margin-bottom: 20px;
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.1) rotate(5deg); opacity: 0.8; }
        }

        .anyhome-quiz-welcome-header h2 {
            color: #1A1A1A;
            margin-bottom: 8px;
            font-size: 24px;
            font-weight: 300;
            line-height: 1.2;
        }

        .anyhome-quiz-welcome-subtitle {
            color: #666;
            font-size: 14px;
            margin: 0;
            font-weight: 400;
        }

        .anyhome-quiz-premium-benefits {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .anyhome-quiz-benefit-card {
            background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
            border: 1px solid #E8E0D0;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .anyhome-quiz-benefit-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(135deg, #C9A961 0%, #A08950 100%);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .anyhome-quiz-benefit-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(201, 169, 97, 0.15);
            border-color: #C9A961;
        }

        .anyhome-quiz-benefit-card:hover::before {
            transform: scaleX(1);
        }

        .anyhome-quiz-benefit-icon {
            font-size: 24px;
            margin-bottom: 6px;
            color: #C9A961;
        }

        .anyhome-quiz-benefit-content h4 {
            color: #1A1A1A;
            margin: 0 0 4px 0;
            font-size: 13px;
            font-weight: 600;
        }

        .anyhome-quiz-benefit-content p {
            color: #666;
            margin: 0;
            font-size: 11px;
            line-height: 1.3;
        }

        .anyhome-quiz-welcome-footer {
            text-align: center;
        }

        .anyhome-quiz-trust-indicators {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 16px;
            padding: 12px;
            background: linear-gradient(135deg, rgba(201, 169, 97, 0.05) 0%, rgba(201, 169, 97, 0.1) 100%);
            border-radius: 8px;
            border: 1px solid rgba(201, 169, 97, 0.2);
        }

        .anyhome-quiz-trust-item {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .anyhome-quiz-trust-number {
            font-size: 16px;
            font-weight: 700;
            color: #C9A961;
            margin-bottom: 2px;
        }

        .anyhome-quiz-trust-text {
            font-size: 10px;
            color: #666;
            text-transform: uppercase;
            letter-spacing: 0.3px;
        }

        .anyhome-quiz-btn.premium-btn {
            background: linear-gradient(135deg, #C9A961 0%, #A08950 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 6px 20px rgba(201, 169, 97, 0.3);
            position: relative;
            overflow: hidden;
        }

        .anyhome-quiz-btn.premium-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .anyhome-quiz-btn.premium-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(201, 169, 97, 0.4);
        }

        .anyhome-quiz-btn.premium-btn:hover::before {
            left: 100%;
        }

        .anyhome-quiz-btn-text {
            position: relative;
            z-index: 1;
        }

        .anyhome-quiz-btn-arrow {
            position: relative;
            z-index: 1;
            transition: transform 0.3s ease;
        }

        .anyhome-quiz-btn.premium-btn:hover .anyhome-quiz-btn-arrow {
            transform: translateX(4px);
        }

        /* –ú–æ–±–∏–ª—å–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è - –ü–ª–∞–Ω—à–µ—Ç—ã (768px) */
        @media (max-width: 768px) {
            .anyhome-quiz-container {
                max-width: 95%;
                margin: 15px auto;
                border-radius: 16px;
            }
            
            .anyhome-quiz-content {
                padding: 24px;
                max-height: 85vh;
                overflow-y: auto;
            }
            
            .anyhome-quiz-step h2 {
                font-size: 26px;
                line-height: 1.2;
                margin-bottom: 12px;
            }
            
            .anyhome-quiz-step p {
                font-size: 16px;
                line-height: 1.4;
                margin-bottom: 20px;
            }
            
            .anyhome-quiz-options {
                grid-template-columns: 1fr;
            }
            
            .anyhome-quiz-options-mobile {
                grid-template-columns: repeat(3, 1fr);
                gap: 6px;
                margin-bottom: 15px;
            }
            
            .anyhome-quiz-option-card.compact {
                padding: 10px 6px;
            }
            
            .anyhome-quiz-option-card.compact .anyhome-quiz-option-icon {
                font-size: 18px;
                margin-bottom: 3px;
            }
            
            .anyhome-quiz-option-card.compact .anyhome-quiz-option-text {
                font-size: 11px;
            }
            
            .anyhome-quiz-navigation {
                flex-direction: column;
            }
            
            .anyhome-quiz-style-options {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .anyhome-quiz-style-card {
                min-height: 120px;
                padding: 10px;
            }
            
            .anyhome-quiz-style-image {
                height: 40px;
                font-size: 20px;
            }
            
            .anyhome-quiz-style-name {
                font-size: 13px;
            }
            
            .anyhome-quiz-style-desc {
                font-size: 10px;
            }
            
            .anyhome-quiz-welcome-header {
                margin-bottom: 8px;
            }
            
            .anyhome-quiz-welcome-header h2 {
                font-size: 16px;
                margin-bottom: 4px;
                line-height: 1.1;
            }
            
            .anyhome-quiz-welcome-subtitle {
                font-size: 11px;
                margin-bottom: 0;
            }
            
            .anyhome-quiz-premium-benefits {
                grid-template-columns: repeat(2, 1fr);
                gap: 4px;
                margin-bottom: 10px;
            }
            
            .anyhome-quiz-benefit-card {
                padding: 6px;
                border-radius: 6px;
            }
            
            .anyhome-quiz-benefit-icon {
                font-size: 14px;
                margin-bottom: 2px;
            }
            
            .anyhome-quiz-benefit-content h4 {
                font-size: 10px;
                margin-bottom: 1px;
                line-height: 1.1;
            }
            
            .anyhome-quiz-benefit-content p {
                font-size: 8px;
                line-height: 1.1;
            }
            
            .anyhome-quiz-trust-indicators {
                flex-direction: row;
                gap: 6px;
                padding: 6px;
                margin-bottom: 10px;
                border-radius: 6px;
            }
            
            .anyhome-quiz-trust-item {
                flex-direction: column;
                align-items: center;
                gap: 1px;
            }
            
            .anyhome-quiz-trust-number {
                font-size: 12px;
            }
            
            .anyhome-quiz-trust-text {
                font-size: 8px;
            }
            
            .anyhome-quiz-btn.premium-btn {
                padding: 10px 16px;
                font-size: 13px;
                margin-top: 0;
            }
            
            /* –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ —Å–ø–æ—Å–æ–±–∞ —Å–≤—è–∑–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            .anyhome-quiz-contact-method-buttons {
                flex-direction: column;
                gap: 8px;
            }
            
            .anyhome-quiz-contact-method-btn {
                padding: 14px 16px;
                font-size: 15px;
            }
            
            /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            .anyhome-quiz-action-buttons {
                flex-direction: column;
                gap: 8px;
            }
            
            .anyhome-quiz-action-btn {
                padding: 14px 16px;
                font-size: 15px;
            }
            
            /* –ö–æ–º–ø–∞–∫—Ç–Ω—ã–µ —Å—Ç–∏–ª–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
            .anyhome-quiz-success-message.compact {
                padding: 16px;
                max-width: 100%;
            }
            
            .anyhome-quiz-compact-contact {
                margin: 16px 0;
                padding: 16px;
            }
            
            .anyhome-quiz-compact-contact div {
                font-size: 14px;
                margin-bottom: 8px;
            }
            
            .anyhome-quiz-compact-process {
                margin: 16px 0;
                padding: 16px;
            }
            
            .anyhome-quiz-compact-item {
                font-size: 14px;
                margin-bottom: 10px;
            }
            
            .anyhome-quiz-compact-actions {
                margin: 16px 0;
            }
            
            .anyhome-quiz-success-footer {
                margin-top: 16px;
                padding-top: 12px;
            }
        }

        /* –ú–µ–¥–∏–∞-–∑–∞–ø—Ä–æ—Å –¥–ª—è –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤ */
        @media (max-width: 480px) {
            .anyhome-quiz-container {
                max-width: 98%;
                margin: 5px auto;
            }
            
            .anyhome-quiz-content {
                padding: 15px 15px 15px 15px;
            }
            
            .anyhome-quiz-step h2 {
                font-size: 20px;
            }
            
            .anyhome-quiz-step p {
                font-size: 14px;
            }
            
            .anyhome-quiz-contact-method-btn,
            .anyhome-quiz-action-btn {
                padding: 12px 14px;
                font-size: 14px;
            }
            
            .anyhome-quiz-compact-contact,
            .anyhome-quiz-compact-process {
                padding: 12px;
                margin: 12px 0;
            }
            
            .anyhome-quiz-compact-contact div,
            .anyhome-quiz-compact-item {
                font-size: 13px;
            }
            
            .anyhome-quiz-success-message.compact {
                padding: 12px;
            }
            
            /* –ß–µ–∫–±–æ–∫—Å—ã –Ω–∞ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
            .anyhome-quiz-checkbox-item {
                padding: 10px;
                margin-bottom: 6px;
            }
            
            .anyhome-quiz-checkbox-item input[type="checkbox"] {
                width: 18px;
                height: 18px;
                margin-right: 10px;
            }
            
            .anyhome-quiz-checkbox-item label {
                font-size: 13px;
            }
            
            .anyhome-quiz-category-title {
                font-size: 16px;
                margin-bottom: 12px;
            }
            
            .anyhome-quiz-category-title.compact {
                font-size: 12px;
                margin-bottom: 6px;
            }
            
            .anyhome-quiz-checkbox-group.compact {
                grid-template-columns: 1fr;
                gap: 4px;
            }
            
            .anyhome-quiz-checkbox-item.compact {
                padding: 6px;
                margin-bottom: 3px;
            }
            
            .anyhome-quiz-checkbox-item.compact input[type="checkbox"] {
                width: 14px;
                height: 14px;
                margin-right: 6px;
            }
            
            .anyhome-quiz-checkbox-item.compact label {
                font-size: 11px;
            }
            
            .anyhome-quiz-furniture-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 6px;
            }
            
            .anyhome-quiz-furniture-card {
                padding: 6px;
            }
            
            .anyhome-quiz-furniture-icon {
                font-size: 14px;
                margin-bottom: 3px;
            }
            
            .anyhome-quiz-furniture-text {
                font-size: 9px;
            }
            
            /* –§–æ—Ä–º–∞ –Ω–∞ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
            .anyhome-quiz-form-group input,
            .anyhome-quiz-form-group select {
                padding: 12px;
                font-size: 16px; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑—É–º –Ω–∞ iOS */
            }
            
            .anyhome-quiz-form {
                margin-bottom: 20px;
            }
            
            .anyhome-quiz-navigation {
                gap: 10px;
            }
            
            .anyhome-quiz-btn {
                padding: 12px 20px;
                font-size: 14px;
            }
            
            /* –ò–∫–æ–Ω–∫–∏ –Ω–∞ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
            .anyhome-quiz-option-icon {
                font-size: 28px;
                margin-bottom: 8px;
            }
            
            .anyhome-quiz-option-text {
                font-size: 13px;
            }
            
            .anyhome-quiz-option-card {
                padding: 12px;
            }
            
            .anyhome-quiz-options-mobile {
                grid-template-columns: repeat(3, 1fr);
                gap: 4px;
                margin-bottom: 12px;
            }
            
            .anyhome-quiz-option-card.compact {
                padding: 8px 4px;
            }
            
            .anyhome-quiz-option-card.compact .anyhome-quiz-option-icon {
                font-size: 16px;
                margin-bottom: 2px;
            }
            
            .anyhome-quiz-option-card.compact .anyhome-quiz-option-text {
                font-size: 10px;
            }
            
            .anyhome-quiz-welcome-header {
                margin-bottom: 8px;
            }
            
            .anyhome-quiz-welcome-header h2 {
                font-size: 16px;
                margin-bottom: 4px;
                line-height: 1.1;
            }
            
            .anyhome-quiz-welcome-subtitle {
                font-size: 11px;
            }
            
            .anyhome-quiz-category-title.compact {
                font-size: 11px;
                margin-bottom: 4px;
            }
            
            .anyhome-quiz-checkbox-group.compact {
                grid-template-columns: 1fr;
                gap: 3px;
            }
            
            .anyhome-quiz-checkbox-item.compact {
                padding: 4px;
                margin-bottom: 2px;
            }
            
            .anyhome-quiz-checkbox-item.compact input[type="checkbox"] {
                width: 12px;
                height: 12px;
                margin-right: 4px;
            }
            
            .anyhome-quiz-checkbox-item.compact label {
                font-size: 10px;
            }
            
            .anyhome-quiz-furniture-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 4px;
            }
            
            .anyhome-quiz-furniture-card {
                padding: 4px;
            }
            
            .anyhome-quiz-furniture-icon {
                font-size: 12px;
                margin-bottom: 2px;
            }
            
            .anyhome-quiz-furniture-text {
                font-size: 8px;
            }
            
            .anyhome-quiz-premium-benefits {
                gap: 4px;
                margin-bottom: 12px;
            }
            
            .anyhome-quiz-benefit-card {
                padding: 6px;
            }
            
            .anyhome-quiz-benefit-icon {
                font-size: 16px;
                margin-bottom: 3px;
            }
            
            .anyhome-quiz-benefit-content h4 {
                font-size: 11px;
                margin-bottom: 2px;
            }
            
            .anyhome-quiz-benefit-content p {
                font-size: 9px;
            }
            
            .anyhome-quiz-trust-indicators {
                padding: 6px;
                gap: 6px;
                margin-bottom: 12px;
            }
            
            .anyhome-quiz-trust-number {
                font-size: 12px;
            }
            
            .anyhome-quiz-trust-text {
                font-size: 8px;
            }
            
            .anyhome-quiz-btn.premium-btn {
                padding: 8px 16px;
                font-size: 13px;
            }
        }

    </style>
</head>
<body>
    <!-- CS-Cart –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–≤–∏–∑ -->
    <div class="anyhome-quiz-overlay" id="anyhome-quiz-overlay">
        <div class="anyhome-quiz-container">
            <div class="anyhome-quiz-header">
                <h2>Any-Home - –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏</h2>
                <button class="anyhome-quiz-close" onclick="anyhomeCloseQuiz()">&times;</button>
            </div>
            
            <div class="anyhome-quiz-content">
                <div class="anyhome-quiz-progress">
                    <div class="anyhome-quiz-progress-bar" id="anyhome-quiz-progress-bar"></div>
                </div>

                <!-- Step 1: Welcome -->
                <div class="anyhome-quiz-step active" data-step="1">
                    <div class="anyhome-quiz-welcome-header">
                        <h2>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏<br>–∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏</h2>
                        <p class="anyhome-quiz-welcome-subtitle">–ü–æ–ª—É—á–∏—Ç–µ —Å–º–µ—Ç—É –∑–∞ 2 –º–∏–Ω—É—Ç—ã</p>
                    </div>
                    
                    <div class="anyhome-quiz-premium-benefits">
                        <div class="anyhome-quiz-benefit-card">
                            <div class="anyhome-quiz-benefit-icon">üìä</div>
                            <div class="anyhome-quiz-benefit-content">
                                <h4>–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç</h4>
                                <p>–¢–æ—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞</p>
                            </div>
                        </div>
                        <div class="anyhome-quiz-benefit-card">
                            <div class="anyhome-quiz-benefit-icon">üé®</div>
                            <div class="anyhome-quiz-benefit-content">
                                <h4>3D-–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è</h4>
                                <p>–í–∞—à –∏–Ω—Ç–µ—Ä—å–µ—Ä —Å –Ω–∞—à–µ–π –º–µ–±–µ–ª—å—é</p>
                            </div>
                        </div>
                        <div class="anyhome-quiz-benefit-card">
                            <div class="anyhome-quiz-benefit-icon">üí∞</div>
                            <div class="anyhome-quiz-benefit-content">
                                <h4>–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω–∞—è —Å–∫–∏–¥–∫–∞</h4>
                                <p>–î–æ 15% –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–≤–∏–∑–∞</p>
                            </div>
                        </div>
                        <div class="anyhome-quiz-benefit-card">
                            <div class="anyhome-quiz-benefit-icon">üë®‚Äçüíº</div>
                            <div class="anyhome-quiz-benefit-content">
                                <h4>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è —ç–∫—Å–ø–µ—Ä—Ç–∞</h4>
                                <p>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="anyhome-quiz-welcome-footer">
                        <div class="anyhome-quiz-trust-indicators">
                            <div class="anyhome-quiz-trust-item">
                                <span class="anyhome-quiz-trust-number">2016</span>
                                <span class="anyhome-quiz-trust-text">–≥–æ–¥ –æ—Å–Ω–æ–≤–∞–Ω–∏—è</span>
                            </div>
                            <div class="anyhome-quiz-trust-item">
                                <span class="anyhome-quiz-trust-number">500+</span>
                                <span class="anyhome-quiz-trust-text">–¥–æ–≤–æ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</span>
                            </div>
                            <div class="anyhome-quiz-trust-item">
                                <span class="anyhome-quiz-trust-number">24/7</span>
                                <span class="anyhome-quiz-trust-text">–ø–æ–¥–¥–µ—Ä–∂–∫–∞</span>
                            </div>
                        </div>
                        
                        <div class="anyhome-quiz-navigation">
                            <button class="anyhome-quiz-btn premium-btn" onclick="anyhomeNextStep()">
                                <span class="anyhome-quiz-btn-text">–ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç</span>
                                <span class="anyhome-quiz-btn-arrow">‚Üí</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Rooms -->
                <div class="anyhome-quiz-step" data-step="2">
                    <h2>–ß—Ç–æ –ø–ª–∞–Ω–∏—Ä—É–µ—Ç–µ –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤–∞—Ç—å?</h2>
                    <div class="anyhome-quiz-options-mobile">
                        <div class="anyhome-quiz-option-card compact" data-value="living" data-type="rooms" onclick="anyhomeSelectOption(this, 'rooms')">
                            <div class="anyhome-quiz-option-icon">üõãÔ∏è</div>
                            <div class="anyhome-quiz-option-text">–ì–æ—Å—Ç–∏–Ω–∞—è</div>
                        </div>
                        <div class="anyhome-quiz-option-card compact" data-value="bedroom" data-type="rooms" onclick="anyhomeSelectOption(this, 'rooms')">
                            <div class="anyhome-quiz-option-icon">üõèÔ∏è</div>
                            <div class="anyhome-quiz-option-text">–°–ø–∞–ª—å–Ω—è</div>
                        </div>
                        <div class="anyhome-quiz-option-card compact" data-value="kitchen" data-type="rooms" onclick="anyhomeSelectOption(this, 'rooms')">
                            <div class="anyhome-quiz-option-icon">üç≥</div>
                            <div class="anyhome-quiz-option-text">–ö—É—Ö–Ω—è-—Å—Ç–æ–ª–æ–≤–∞—è</div>
                        </div>
                        <div class="anyhome-quiz-option-card compact" data-value="office" data-type="rooms" onclick="anyhomeSelectOption(this, 'rooms')">
                            <div class="anyhome-quiz-option-icon">üíº</div>
                            <div class="anyhome-quiz-option-text">–ö–∞–±–∏–Ω–µ—Ç</div>
                        </div>
                        <div class="anyhome-quiz-option-card compact" data-value="hallway" data-type="rooms" onclick="anyhomeSelectOption(this, 'rooms')">
                            <div class="anyhome-quiz-option-icon">üö™</div>
                            <div class="anyhome-quiz-option-text">–ü—Ä–∏—Ö–æ–∂–∞—è</div>
                        </div>
                        <div class="anyhome-quiz-option-card compact" data-value="all" data-type="rooms" onclick="anyhomeSelectOption(this, 'rooms')">
                            <div class="anyhome-quiz-option-icon">üè°</div>
                            <div class="anyhome-quiz-option-text">–í—Å—è –∫–≤–∞—Ä—Ç–∏—Ä–∞/–¥–æ–º</div>
                        </div>
                    </div>
                    <div class="anyhome-quiz-navigation">
                        <button class="anyhome-quiz-btn secondary" onclick="anyhomePrevStep()">–ù–∞–∑–∞–¥</button>
                        <button class="anyhome-quiz-btn primary" onclick="anyhomeNextStep()">–î–∞–ª–µ–µ</button>
                    </div>
                </div>

                <!-- Step 3: Area -->
                <div class="anyhome-quiz-step" data-step="3">
                    <h2>–ö–∞–∫–æ–≤–∞ –æ–±—â–∞—è –ø–ª–æ—â–∞–¥—å –ø–æ–º–µ—â–µ–Ω–∏–π –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏?</h2>
                    <div class="anyhome-quiz-form">
                        <div class="anyhome-quiz-form-group">
                            <input type="number" id="anyhome-area-input" placeholder="–£–∫–∞–∂–∏—Ç–µ –ø–ª–æ—â–∞–¥—å: ___ –º¬≤" min="1" max="1000">
                        </div>
                    </div>
                    <div class="anyhome-quiz-navigation">
                        <button class="anyhome-quiz-btn secondary" onclick="anyhomePrevStep()">–ù–∞–∑–∞–¥</button>
                        <button class="anyhome-quiz-btn primary" onclick="anyhomeNextStep()">–î–∞–ª–µ–µ</button>
                    </div>
                </div>

                <!-- Step 4: Furniture -->
                <div class="anyhome-quiz-step" data-step="4">
                    <h2>–ö–∞–∫–∞—è –º–µ–±–µ–ª—å –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç?</h2>
                    
                    <div class="anyhome-quiz-furniture-mobile">
                        <div class="anyhome-quiz-category-section compact">
                            <div class="anyhome-quiz-category-title compact">üìö –ö–æ—Ä–ø—É—Å–Ω–∞—è –º–µ–±–µ–ª—å</div>
                            <div class="anyhome-quiz-furniture-grid">
                                <div class="anyhome-quiz-furniture-card" data-value="shelves" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üìö</div>
                                    <div class="anyhome-quiz-furniture-text">–°—Ç–µ–ª–ª–∞–∂–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="tv" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üì∫</div>
                                    <div class="anyhome-quiz-furniture-text">–ú–µ–¥–∏–∞-–∫–æ–Ω—Å–æ–ª–∏ –∏ –¢–í-—Ç—É–º–±—ã</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="dressers" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üóÑÔ∏è</div>
                                    <div class="anyhome-quiz-furniture-text">–ö–æ–º–æ–¥—ã –∏ —Ç—É–º–±—ã</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="tables" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">ü™ë</div>
                                    <div class="anyhome-quiz-furniture-text">–°—Ç–æ–ª—ã –∏ –∫–æ–Ω—Å–æ–ª–∏</div>
                                </div>
                            </div>
                        </div>

                        <div class="anyhome-quiz-category-section compact">
                            <div class="anyhome-quiz-category-title compact">üç≥ –ö—É—Ö–Ω—è</div>
                            <div class="anyhome-quiz-furniture-grid">
                                <div class="anyhome-quiz-furniture-card" data-value="kitchen-furniture" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üç≥</div>
                                    <div class="anyhome-quiz-furniture-text">–ö—É—Ö–æ–Ω–Ω–∞—è –º–µ–±–µ–ª—å</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="island" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üèùÔ∏è</div>
                                    <div class="anyhome-quiz-furniture-text">–û—Å—Ç—Ä–æ–≤ –∏ –±–∞—Ä–Ω–∞—è —Å—Ç–æ–π–∫–∞</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="storage" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üì¶</div>
                                    <div class="anyhome-quiz-furniture-text">–°–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="dining" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üçΩÔ∏è</div>
                                    <div class="anyhome-quiz-furniture-text">–û–±–µ–¥–µ–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞</div>
                                </div>
                            </div>
                        </div>

                        <div class="anyhome-quiz-category-section compact">
                            <div class="anyhome-quiz-category-title compact">üëî –ì–∞—Ä–¥–µ—Ä–æ–±–Ω–∞—è</div>
                            <div class="anyhome-quiz-furniture-grid">
                                <div class="anyhome-quiz-furniture-card" data-value="wardrobes" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üëî</div>
                                    <div class="anyhome-quiz-furniture-text">–®–∫–∞—Ñ—ã –∏ —Å—Ç–µ–ª–ª–∞–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="islands" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üèùÔ∏è</div>
                                    <div class="anyhome-quiz-furniture-text">–û—Å—Ç—Ä–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="lingerie" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üëï</div>
                                    <div class="anyhome-quiz-furniture-text">–ö–æ–º–æ–¥—ã –¥–ª—è –±–µ–ª—å—è</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="mirrors" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">ü™û</div>
                                    <div class="anyhome-quiz-furniture-text">–ó–µ—Ä–∫–∞–ª–∞ –∏ –ø—É—Ñ—ã</div>
                                </div>
                            </div>
                        </div>

                        <div class="anyhome-quiz-category-section compact">
                            <div class="anyhome-quiz-category-title compact">üõã –ú—è–≥–∫–∞—è –º–µ–±–µ–ª—å</div>
                            <div class="anyhome-quiz-furniture-grid">
                                <div class="anyhome-quiz-furniture-card" data-value="sofas" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üõãÔ∏è</div>
                                    <div class="anyhome-quiz-furniture-text">–î–∏–≤–∞–Ω—ã –∏ –∫—É—à–µ—Ç–∫–∏</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="armchairs" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">ü™ë</div>
                                    <div class="anyhome-quiz-furniture-text">–ö—Ä–µ—Å–ª–∞ –∏ —à–µ–∑–ª–æ–Ω–≥–∏</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="ottomans" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">ü™ë</div>
                                    <div class="anyhome-quiz-furniture-text">–ü—É—Ñ—ã –∏ –±–∞–Ω–∫–µ—Ç–∫–∏</div>
                                </div>
                            </div>
                        </div>

                        <div class="anyhome-quiz-category-section compact">
                            <div class="anyhome-quiz-category-title compact">üí° –û—Å–≤–µ—â–µ–Ω–∏–µ</div>
                            <div class="anyhome-quiz-furniture-grid">
                                <div class="anyhome-quiz-furniture-card" data-value="chandeliers" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üí°</div>
                                    <div class="anyhome-quiz-furniture-text">–õ—é—Å—Ç—Ä—ã</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="sconces" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üïØÔ∏è</div>
                                    <div class="anyhome-quiz-furniture-text">–ë—Ä–∞</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="floor-lamps" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üî¶</div>
                                    <div class="anyhome-quiz-furniture-text">–¢–æ—Ä—à–µ—Ä—ã</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="table-lamps" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">üí°</div>
                                    <div class="anyhome-quiz-furniture-text">–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –ª–∞–º–ø—ã</div>
                                </div>
                            </div>
                        </div>

                        <div class="anyhome-quiz-category-section compact">
                            <div class="anyhome-quiz-category-title compact">‚ú® –î–µ–∫–æ—Ä —Å –ª–∞—Ç—É–Ω—å—é</div>
                            <div class="anyhome-quiz-furniture-grid">
                                <div class="anyhome-quiz-furniture-card" data-value="decor-mirrors" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">ü™û</div>
                                    <div class="anyhome-quiz-furniture-text">–ó–µ—Ä–∫–∞–ª–∞</div>
                                </div>
                                <div class="anyhome-quiz-furniture-card" data-value="accessories" onclick="anyhomeSelectFurniture(this)">
                                    <div class="anyhome-quiz-furniture-icon">‚ú®</div>
                                    <div class="anyhome-quiz-furniture-text">–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="anyhome-quiz-navigation">
                        <button class="anyhome-quiz-btn secondary" onclick="anyhomePrevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="anyhome-quiz-btn primary" onclick="anyhomeNextStep()">–î–∞–ª–µ–µ ‚Üí</button>
                    </div>
                </div>

                <!-- Step 5: Style -->
                <div class="anyhome-quiz-step" data-step="5">
                    <h2>–í –∫–∞–∫–æ–º —Å—Ç–∏–ª–µ –≤–∞—à –∏–Ω—Ç–µ—Ä—å–µ—Ä?</h2>
                    <p class="subtitle">–≠—Ç–æ –ø–æ–º–æ–∂–µ—Ç –Ω–∞–º –ø–æ–¥–æ–±—Ä–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è</p>
                    
                    <div class="anyhome-quiz-style-options">
                        <div class="anyhome-quiz-style-card" onclick="anyhomeSelectStyle(this)" data-style="modern">
                            <div class="anyhome-quiz-style-image">‚ú®</div>
                            <div class="anyhome-quiz-style-name">–ù–µ–æ–∫–ª–∞—Å—Å–∏–∫–∞</div>
                            <div class="anyhome-quiz-style-desc">–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π —Å—Ç–∏–ª—å —Å –ª–∞—Ç—É–Ω–Ω—ã–º–∏ –∞–∫—Ü–µ–Ω—Ç–∞–º–∏</div>
                        </div>
                        <div class="anyhome-quiz-style-card" onclick="anyhomeSelectStyle(this)" data-style="artdeco">
                            <div class="anyhome-quiz-style-image">üèõÔ∏è</div>
                            <div class="anyhome-quiz-style-name">–ê—Ä-–¥–µ–∫–æ</div>
                            <div class="anyhome-quiz-style-desc">–ü–µ—Ä–µ–æ—Å–º—ã—Å–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∏–∫–∏ 20-—Ö –≥–æ–¥–æ–≤</div>
                        </div>
                        <div class="anyhome-quiz-style-card" onclick="anyhomeSelectStyle(this)" data-style="contemporary">
                            <div class="anyhome-quiz-style-image">üé®</div>
                            <div class="anyhome-quiz-style-name">–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏–∫–∞</div>
                            <div class="anyhome-quiz-style-desc">–ì–∞—Ä–º–æ–Ω–∏—è —Ç—Ä–∞–¥–∏—Ü–∏–π –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ—Å—Ç–∏</div>
                        </div>
                        <div class="anyhome-quiz-style-card" onclick="anyhomeSelectStyle(this)" data-style="minimalist">
                            <div class="anyhome-quiz-style-image">‚óØ</div>
                            <div class="anyhome-quiz-style-name">–ú–∏–Ω–∏–º–∞–ª–∏–∑–º</div>
                            <div class="anyhome-quiz-style-desc">–õ–∞–∫–æ–Ω–∏—á–Ω–æ—Å—Ç—å —Å —Ç–µ–ø–ª—ã–º–∏ –º–µ—Ç–∞–ª–ª–∞–º–∏</div>
                        </div>
                        <div class="anyhome-quiz-style-card" onclick="anyhomeSelectStyle(this)" data-style="industrial">
                            <div class="anyhome-quiz-style-image">‚öôÔ∏è</div>
                            <div class="anyhome-quiz-style-name">–ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–π</div>
                            <div class="anyhome-quiz-style-desc">–£—Ä–±–∞–Ω–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —à–∏–∫</div>
                        </div>
                        <div class="anyhome-quiz-style-card" onclick="anyhomeSelectStyle(this)" data-style="undecided">
                            <div class="anyhome-quiz-style-image">üí≠</div>
                            <div class="anyhome-quiz-style-name">–ï—â–µ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª—Å—è</div>
                            <div class="anyhome-quiz-style-desc">–ù—É–∂–Ω–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</div>
                        </div>
                    </div>
                    
                    <div class="anyhome-quiz-navigation">
                        <button class="anyhome-quiz-btn secondary" onclick="anyhomePrevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="anyhome-quiz-btn primary" onclick="anyhomeNextStep()">–î–∞–ª–µ–µ ‚Üí</button>
                    </div>
                </div>

                <!-- Step 6: Contact -->
                <div class="anyhome-quiz-step" data-step="6">
                    <h2>–û—Å—Ç–∞–≤—å—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–∞—Å—á–µ—Ç–∞</h2>
                    <div class="anyhome-quiz-form">
                        <div class="anyhome-quiz-form-group">
                            <label for="anyhome-name-input">–í–∞—à–µ –∏–º—è</label>
                            <input type="text" id="anyhome-name-input" placeholder="–í–∞—à–µ –∏–º—è" required>
                        </div>
                        <div class="anyhome-quiz-form-group">
                            <label for="anyhome-phone-input">–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                            <input type="tel" id="anyhome-phone-input" placeholder="+7 (___) ___-__-__" pattern="\+7\s?\(\d{3}\)\s?\d{3}-\d{2}-\d{2}" required>
                        </div>
                        <div class="anyhome-quiz-form-group">
                            <label>–°–ø–æ—Å–æ–± —Å–≤—è–∑–∏:</label>
                            <div class="anyhome-quiz-contact-method-buttons">
                                <button type="button" class="anyhome-quiz-contact-method-btn active" data-method="whatsapp" onclick="anyhomeSelectContactMethod(this)">
                                    üì± WhatsApp
                                </button>
                                <button type="button" class="anyhome-quiz-contact-method-btn" data-method="phone" onclick="anyhomeSelectContactMethod(this)">
                                    üìû –ó–≤–æ–Ω–æ–∫
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="anyhome-quiz-navigation">
                        <button class="anyhome-quiz-btn secondary" onclick="anyhomePrevStep()">‚Üê –ù–∞–∑–∞–¥</button>
                        <button class="anyhome-quiz-btn primary" onclick="anyhomeSubmitQuiz()">–ü–æ–ª—É—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏</button>
                    </div>
                </div>

                <!-- Success Step -->
                <div class="anyhome-quiz-step" data-step="7">
                    <div class="anyhome-quiz-success-message compact">
                        <div class="anyhome-quiz-success-icon">‚ú®</div>
                        <h2>–°–ø–∞—Å–∏–±–æ, <span id="anyhome-userName">–ò–º—è</span>!</h2>
                        <p class="anyhome-quiz-success-description">–ú—ã —É–∂–µ –Ω–∞—á–∞–ª–∏ –≥–æ—Ç–æ–≤–∏—Ç—å –¥–ª—è –≤–∞—Å –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–π –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏.</p>
                        
                        <div class="anyhome-quiz-compact-process">
                            <div class="anyhome-quiz-compact-item">üéØ –ù–∞—à–∏ —ç–∫—Å–ø–µ—Ä—Ç—ã –∏–∑—É—á–∞—Ç –≤–∞—à–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è</div>
                            <div class="anyhome-quiz-compact-item">üíé –ü–æ–¥–≥–æ—Ç–æ–≤–∏–º –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</div>
                            <div class="anyhome-quiz-compact-item">üìû –°–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 2 —á–∞—Å–æ–≤</div>
                        </div>
                        
                        <div class="anyhome-quiz-compact-contact">
                            <div>üìç <strong>–®–æ—É-—Ä—É–º:</strong> –ë–æ–ª—å—à–æ–π –°–∞–≤–≤–∏–Ω—Å–∫–∏–π –ø–µ—Ä. 12, —Å—Ç—Ä. 8</div>
                            <div>‚è∞ <strong>–†–∞–±–æ—Ç–∞–µ–º:</strong> –µ–∂–µ–¥–Ω–µ–≤–Ω–æ —Å 10:00 –¥–æ 20:00</div>
                            <div>üìû <strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> +7 (495) 120-35-42</div>
                        </div>
                        
                        <div class="anyhome-quiz-compact-actions">
                            <div class="anyhome-quiz-action-buttons">
                                <button class="anyhome-quiz-action-btn whatsapp-btn" onclick="anyhomeOpenWhatsApp()">
                                    üì± WhatsApp
                                </button>
                                <button class="anyhome-quiz-action-btn call-btn" onclick="anyhomeMakeCall()">
                                    üìû –ü–æ–∑–≤–æ–Ω–∏—Ç—å
                                </button>
                            </div>
                            <button class="anyhome-quiz-btn primary" onclick="anyhomeCloseQuiz()">–ó–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                        
                        <div class="anyhome-quiz-success-footer">
                            <p class="anyhome-quiz-footer-text">–°–æ–∑–¥–∞–µ–º –∏–Ω—Ç–µ—Ä—å–µ—Ä—ã –º–µ—á—Ç—ã —Å 2016 –≥–æ–¥–∞</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // CS-Cart –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
        (function() {
            'use strict';
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–≤–∏–∑–∞
            const BOT_TOKEN = '8272787786:AAHhdBCZvk1B30ZaVvWIttRWBGuwF64gdaI';
            const CHAT_ID = '384321326';
            
            // –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
            const YANDEX_METRIKA_ID = '43640809'; // ID —Å—á–µ—Ç—á–∏–∫–∞ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
            
            // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–≤–∏–∑–∞
            let anyhomeQuizState = {
                currentStep: 1,
                totalSteps: 6,
                backButtonClicks: 0,
                data: {
                    rooms: [],
                    area: '',
                    furniture: [],
                    style: '',
                    timeline: '',
                    contact: {
                        name: '',
                        phone: '',
                        method: 'whatsapp'
                    }
                }
            };

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–≤–∏–∑–∞
            function anyhomeInitQuiz() {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ—Å—Å–∏–∏
                if (!sessionStorage.getItem('anyhome-session-start')) {
                    sessionStorage.setItem('anyhome-session-start', new Date().toISOString());
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è –ª–∏ –∫–≤–∏–∑ —É–∂–µ –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏
                if (sessionStorage.getItem('anyhome-quiz-shown') === 'true') {
                    console.log('–ö–≤–∏–∑ —É–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏');
                    return;
                }
                
                // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ 30 —Å–µ–∫—É–Ω–¥
                setTimeout(anyhomeShowQuiz, 1000);
                
                // –ú–∞—Å–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
                const phoneInput = document.getElementById('anyhome-phone-input');
                if (phoneInput) {
                    phoneInput.addEventListener('input', anyhomeFormatPhone);
                }
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å –∫–≤–∏–∑
            function anyhomeShowQuiz() {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –µ—â–µ —Ä–∞–∑ –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º
                if (sessionStorage.getItem('anyhome-quiz-shown') === 'true') {
                    return;
                }
                
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ –∫–≤–∏–∑–∞
                sessionStorage.setItem('anyhome-quiz-start', new Date().toISOString());
                
                const overlay = document.getElementById('anyhome-quiz-overlay');
                if (overlay) {
                    overlay.style.display = 'flex';
                    anyhomeUpdateProgress();
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å, —á—Ç–æ –∫–≤–∏–∑ –±—ã–ª –ø–æ–∫–∞–∑–∞–Ω
                    sessionStorage.setItem('anyhome-quiz-shown', 'true');
                    console.log('–ö–≤–∏–∑ –ø–æ–∫–∞–∑–∞–Ω, —Å—Ç–∞—Ç—É—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ —Å–µ—Å—Å–∏–∏');
                }
            }

            // –°–∫—Ä—ã—Ç—å –∫–≤–∏–∑
            function anyhomeCloseQuiz() {
                const overlay = document.getElementById('anyhome-quiz-overlay');
                if (overlay) {
                    overlay.style.display = 'none';
                }
            }

            // –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥
            function anyhomeNextStep() {
                if (anyhomeValidateStep()) {
                    anyhomeSaveStepData();
                    
                    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞—á–∞–ª–µ –∫–≤–∏–∑–∞ (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ —Å –ø–µ—Ä–≤–æ–≥–æ —à–∞–≥–∞)
                    if (anyhomeQuizState.currentStep === 1) {
                        anyhomeSendStartNotification();
                    }
                    
                    if (anyhomeQuizState.currentStep < anyhomeQuizState.totalSteps) {
                        anyhomeQuizState.currentStep++;
                        anyhomeShowStep();
                        anyhomeUpdateProgress();
                    }
                }
            }

            // –ü—Ä–µ–¥—ã–¥—É—â–∏–π —à–∞–≥
            function anyhomePrevStep() {
                if (anyhomeQuizState.currentStep > 1) {
                    anyhomeQuizState.currentStep--;
                    anyhomeQuizState.backButtonClicks++;
                    anyhomeShowStep();
                    anyhomeUpdateProgress();
                }
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–∏–π —à–∞–≥
            function anyhomeShowStep() {
                const steps = document.querySelectorAll('.anyhome-quiz-step');
                steps.forEach(step => {
                    step.classList.remove('active');
                });
                
                const currentStep = document.querySelector(`[data-step="${anyhomeQuizState.currentStep}"]`);
                if (currentStep) {
                    currentStep.classList.add('active');
                }
            }

            // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
            function anyhomeUpdateProgress() {
                const progressBar = document.getElementById('anyhome-quiz-progress-bar');
                if (progressBar) {
                    const progress = (anyhomeQuizState.currentStep / anyhomeQuizState.totalSteps) * 100;
                    progressBar.style.width = progress + '%';
                }
            }

            // –í–∞–ª–∏–¥–∞—Ü–∏—è —à–∞–≥–∞
            function anyhomeValidateStep() {
                if (anyhomeQuizState.currentStep === 6) {
                    const name = document.getElementById('anyhome-name-input').value.trim();
                    const phone = document.getElementById('anyhome-phone-input').value.trim();
                    
                    if (!name || !phone) {
                        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∏–º—è –∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
                        return false;
                    }
                    
                    const phonePattern = /\+7\s?\(\d{3}\)\s?\d{3}-\d{2}-\d{2}/;
                    if (!phonePattern.test(phone)) {
                        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞');
                        return false;
                    }
                }
                return true;
            }

            // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —à–∞–≥–∞
            function anyhomeSaveStepData() {
                if (anyhomeQuizState.currentStep === 3) {
                    const areaInput = document.getElementById('anyhome-area-input');
                    if (areaInput) {
                        anyhomeQuizState.data.area = areaInput.value;
                    }
                } else if (anyhomeQuizState.currentStep === 4) {
                    // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º —Å—á–∏—Ç–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –º–µ–±–µ–ª–∏ (CS-Cart –≤–∞—Ä–∏–∞–Ω—Ç –±–µ–∑ —á–µ–∫–±–æ–∫—Å–æ–≤)
                    const selectedCards = document.querySelectorAll('.anyhome-quiz-furniture-card.selected');
                    if (selectedCards.length > 0) {
                        anyhomeQuizState.data.furniture = Array.from(selectedCards).map(el => el.getAttribute('data-value'));
                    } else {
                        // –§–æ–ª–±—ç–∫: –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–µ–∫–±–æ–∫—Å—ã, —Å—á–∏—Ç–∞–µ–º –∏—Ö
                        const furnitureCheckboxes = document.querySelectorAll('input[type="checkbox"]:checked');
                        if (furnitureCheckboxes.length > 0) {
                            anyhomeQuizState.data.furniture = Array.from(furnitureCheckboxes).map(cb => cb.value);
                        }
                        // –ò–Ω–∞—á–µ –æ—Å—Ç–∞–≤–ª—è–µ–º —Ä–∞–Ω–µ–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (–∫–ª–∏–∫–∏ –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º —É–∂–µ –∑–∞–ø–∏—Å–∞–ª–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
                    }
                } else if (anyhomeQuizState.currentStep === 6) {
                    const nameInput = document.getElementById('anyhome-name-input');
                    const phoneInput = document.getElementById('anyhome-phone-input');
                    const activeContactMethod = document.querySelector('.anyhome-quiz-contact-method-btn.active');
                    
                    if (nameInput) anyhomeQuizState.data.contact.name = nameInput.value.trim();
                    if (phoneInput) anyhomeQuizState.data.contact.phone = phoneInput.value.trim();
                    if (activeContactMethod) anyhomeQuizState.data.contact.method = activeContactMethod.dataset.method;
                }
            }

            // –í—ã–±–æ—Ä –æ–ø—Ü–∏–∏
            function anyhomeSelectOption(element, type) {
                const value = element.getAttribute('data-value');
                
                if (type === 'rooms') {
                    if (!anyhomeQuizState.data.rooms.includes(value)) {
                        anyhomeQuizState.data.rooms.push(value);
                        element.classList.add('selected');
                    } else {
                        anyhomeQuizState.data.rooms = anyhomeQuizState.data.rooms.filter(room => room !== value);
                        element.classList.remove('selected');
                    }
                }
            }

            // –í—ã–±–æ—Ä –º–µ–±–µ–ª–∏
            function anyhomeSelectFurniture(element) {
                const value = element.getAttribute('data-value');
                
                if (!anyhomeQuizState.data.furniture.includes(value)) {
                    anyhomeQuizState.data.furniture.push(value);
                    element.classList.add('selected');
                } else {
                    anyhomeQuizState.data.furniture = anyhomeQuizState.data.furniture.filter(item => item !== value);
                    element.classList.remove('selected');
                }
            }

            // –í—ã–±–æ—Ä —Å—Ç–∏–ª—è
            function anyhomeSelectStyle(element) {
                document.querySelectorAll('.anyhome-quiz-style-card').forEach(card => {
                    card.classList.remove('selected');
                });
                element.classList.add('selected');
                anyhomeQuizState.data.style = element.dataset.style;
            }

            // –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ —Å–≤—è–∑–∏
            function anyhomeSelectContactMethod(element) {
                document.querySelectorAll('.anyhome-quiz-contact-method-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                element.classList.add('active');
                anyhomeQuizState.data.contact.method = element.dataset.method;
            }

            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
            function anyhomeFormatPhone(event) {
                let value = event.target.value.replace(/\D/g, '');
                if (value.startsWith('7')) {
                    value = value.substring(1);
                }
                if (value.length > 0) {
                    value = '+7 (' + value.substring(0, 3) + ') ' + value.substring(3, 6) + '-' + value.substring(6, 8) + '-' + value.substring(8, 10);
                } else {
                    value = '+7 (';
                }
                event.target.value = value;
            }

            // –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–≤–∏–∑–∞
            function anyhomeSubmitQuiz() {
                if (anyhomeValidateStep()) {
                    anyhomeSaveStepData();
                    
                    // –û–±–Ω–æ–≤–∏—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    const userNameElement = document.getElementById('anyhome-userName');
                    if (userNameElement) {
                        userNameElement.textContent = anyhomeQuizState.data.contact.name || '–ö–ª–∏–µ–Ω—Ç';
                    }
                    
                    // –ü–µ—Ä–µ–π—Ç–∏ –∫ —ç–∫—Ä–∞–Ω—É —É—Å–ø–µ—Ö–∞
                    anyhomeQuizState.currentStep = 7;
                    anyhomeShowStep();
                    anyhomeUpdateProgress();
                    
                    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ Telegram
                    anyhomeSendToTelegram();
                }
            }

            // –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞—á–∞–ª–µ –∫–≤–∏–∑–∞
            function anyhomeSendStartNotification() {
                // –ü–æ–ª—É—á–∞–µ–º URL —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –µ—Å–ª–∏ –∫–≤–∏–∑ –≤ iframe
                let currentPage, pageTitle;
                
                if (window.parent && window.parent !== window) {
                    // –ö–≤–∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω –≤ iframe
                    try {
                        currentPage = window.parent.location.href;
                        pageTitle = window.parent.document.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                    } catch (e) {
                        // –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–∫–Ω—É, –∏—Å–ø–æ–ª—å–∑—É–µ–º referrer
                        currentPage = document.referrer || window.location.href;
                        pageTitle = '–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–π—Ç–∞';
                    }
                } else {
                    // –ö–≤–∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞–ø—Ä—è–º—É—é
                    currentPage = window.location.href;
                    pageTitle = document.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∑–∞–ø—É—Å–∫–µ
                const deviceInfo = anyhomeGetDeviceInfo();
                const trafficInfo = anyhomeGetTrafficInfo();
                const sessionInfo = anyhomeGetSessionInfo();
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
                const formatTime = (seconds) => {
                    if (seconds < 60) return `${seconds} —Å–µ–∫`;
                    const minutes = Math.floor(seconds / 60);
                    const remainingSeconds = seconds % 60;
                    return `${minutes} –º–∏–Ω ${remainingSeconds} —Å–µ–∫`;
                };
                
                // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å —ç–º–æ–¥–∑–∏
                const deviceEmoji = deviceInfo.deviceType === 'mobile' ? 'üì±' : 
                                  deviceInfo.deviceType === 'tablet' ? 'üì±' : 'üíª';
                
                const startMessage = `üöÄ <b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞—á–∞–ª –∫–≤–∏–∑!</b>

‚è∞ <b>–í—Ä–µ–º—è:</b> ${new Date().toLocaleString('ru-RU')}
üåê <b>–ò—Å—Ç–æ—á–Ω–∏–∫:</b> –°–∞–π—Ç Any-Home
üìÑ <b>–°—Ç—Ä–∞–Ω–∏—Ü–∞:</b> ${pageTitle}
üîó <b>URL:</b> ${currentPage}

${deviceEmoji} <b>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:</b> ${deviceInfo.deviceType === 'mobile' ? '–ú–æ–±–∏–ª—å–Ω–æ–µ' : 
                                   deviceInfo.deviceType === 'tablet' ? '–ü–ª–∞–Ω—à–µ—Ç' : '–î–µ—Å–∫—Ç–æ–ø'} (${deviceInfo.os})
üíª <b>–ë—Ä–∞—É–∑–µ—Ä:</b> ${deviceInfo.browser}
üìê <b>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:</b> ${deviceInfo.screenResolution}
üåç <b>–Ø–∑—ã–∫:</b> ${deviceInfo.language}
üïê <b>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:</b> ${deviceInfo.timezone}

‚è≥ <b>–í—Ä–µ–º—è –Ω–∞ —Å–∞–π—Ç–µ –¥–æ –∫–≤–∏–∑–∞:</b> ${formatTime(sessionInfo.timeToQuiz)}
üîó <b>–ò—Å—Ç–æ—á–Ω–∏–∫ —Ç—Ä–∞—Ñ–∏–∫–∞:</b> ${trafficInfo.trafficSource} (${trafficInfo.trafficMedium})
üìÑ <b>Referrer:</b> ${trafficInfo.referrer}
${trafficInfo.utmCampaign ? `üéØ <b>UTM –∫–∞–º–ø–∞–Ω–∏—è:</b> ${trafficInfo.utmCampaign}` : ''}

---
üí° <i>–û–∂–∏–¥–∞–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–≤–∏–∑–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</i>`;
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É
                anyhomeSendQuizStartEvent();
                
                fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: startMessage,
                        parse_mode: 'HTML'
                    })
                })
                .then(response => response.json())
                .then(result => {
                    if (result.ok) {
                        console.log('Start notification sent to Telegram successfully', result);
                    } else {
                        console.error('Telegram API error (start notification):', result.description);
                    }
                })
                .catch(error => {
                    console.error('Error sending start notification to Telegram:', error);
                });
            }

            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
            function anyhomeSendToTelegram() {
                const message = anyhomeFormatTelegramMessage();
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫–≤–∏–∑–∞ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É
                anyhomeSendQuizCompleteEvent();
                
                fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: CHAT_ID,
                        text: message,
                        parse_mode: 'HTML'
                    })
                })
                .then(response => response.json())
                .then(result => {
                    if (result.ok) {
                        console.log('Data sent to Telegram successfully', result);
                    } else {
                        console.error('Telegram API error:', result.description);
                    }
                })
                .catch(error => {
                    console.error('Error sending to Telegram:', error);
                });
            }

            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
            function anyhomeGetDeviceInfo() {
                const userAgent = navigator.userAgent;
                const screen = window.screen;
                
                // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
                let deviceType = 'desktop';
                if (/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(userAgent)) {
                    deviceType = 'mobile';
                } else if (/iPad|Android/i.test(userAgent) && screen.width >= 768) {
                    deviceType = 'tablet';
                }
                
                // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
                let os = 'Unknown';
                if (/Windows/i.test(userAgent)) os = 'Windows';
                else if (/Mac/i.test(userAgent)) os = 'macOS';
                else if (/Linux/i.test(userAgent)) os = 'Linux';
                else if (/Android/i.test(userAgent)) os = 'Android';
                else if (/iPhone|iPad|iPod/i.test(userAgent)) os = 'iOS';
                
                // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞
                let browser = 'Unknown';
                if (/Chrome/i.test(userAgent) && !/Edge/i.test(userAgent)) browser = 'Chrome';
                else if (/Firefox/i.test(userAgent)) browser = 'Firefox';
                else if (/Safari/i.test(userAgent) && !/Chrome/i.test(userAgent)) browser = 'Safari';
                else if (/Edge/i.test(userAgent)) browser = 'Edge';
                else if (/Opera/i.test(userAgent)) browser = 'Opera';
                
                return {
                    deviceType: deviceType,
                    os: os,
                    browser: browser,
                    screenResolution: `${screen.width}x${screen.height}`,
                    language: navigator.language || navigator.userLanguage,
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
                };
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Ç—Ä–∞—Ñ–∏–∫–µ
            function anyhomeGetTrafficInfo() {
                const referrer = document.referrer;
                const urlParams = new URLSearchParams(window.location.search);
                
                // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞
                let trafficSource = 'direct';
                let trafficMedium = 'none';
                
                if (referrer) {
                    try {
                        const referrerUrl = new URL(referrer);
                        const hostname = referrerUrl.hostname.toLowerCase();
                        
                        if (hostname.includes('google')) {
                            trafficSource = 'google';
                            trafficMedium = 'organic';
                        } else if (hostname.includes('yandex')) {
                            trafficSource = 'yandex';
                            trafficMedium = 'organic';
                        } else if (hostname.includes('facebook') || hostname.includes('instagram')) {
                            trafficSource = 'facebook';
                            trafficMedium = 'social';
                        } else if (hostname.includes('vk.com')) {
                            trafficSource = 'vk';
                            trafficMedium = 'social';
                        } else if (hostname.includes('youtube')) {
                            trafficSource = 'youtube';
                            trafficMedium = 'social';
                        } else if (hostname.includes('telegram')) {
                            trafficSource = 'telegram';
                            trafficMedium = 'social';
                        } else {
                            trafficSource = 'referral';
                            trafficMedium = 'referral';
                        }
                    } catch (e) {
                        trafficSource = 'referral';
                        trafficMedium = 'referral';
                    }
                }
                
                // –ü–æ–ª—É—á–µ–Ω–∏–µ UTM-–º–µ—Ç–æ–∫
                const utmSource = urlParams.get('utm_source') || '';
                const utmMedium = urlParams.get('utm_medium') || '';
                const utmCampaign = urlParams.get('utm_campaign') || '';
                
                return {
                    referrer: referrer || '–ü—Ä—è–º–æ–π –∑–∞—Ö–æ–¥',
                    trafficSource: utmSource || trafficSource,
                    trafficMedium: utmMedium || trafficMedium,
                    utmCampaign: utmCampaign,
                    utmSource: utmSource,
                    utmMedium: utmMedium
                };
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å–µ—Å—Å–∏–∏
            function anyhomeGetSessionInfo() {
                const now = new Date();
                const sessionStart = sessionStorage.getItem('anyhome-session-start');
                const quizStart = sessionStorage.getItem('anyhome-quiz-start');
                
                let sessionDuration = 0;
                let timeToQuiz = 0;
                
                if (sessionStart) {
                    sessionDuration = Math.round((now - new Date(sessionStart)) / 1000);
                }
                
                if (quizStart) {
                    timeToQuiz = Math.round((new Date(quizStart) - new Date(sessionStart)) / 1000);
                }
                
                return {
                    sessionDuration: sessionDuration,
                    timeToQuiz: timeToQuiz,
                    sessionStart: sessionStart
                };
            }
            
            // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –≤ –∫–≤–∏–∑–µ
            function anyhomeGetQuizBehavior() {
                const quizStart = sessionStorage.getItem('anyhome-quiz-start');
                const now = new Date();
                
                let quizDuration = 0;
                if (quizStart) {
                    quizDuration = Math.round((now - new Date(quizStart)) / 1000);
                }
                
                return {
                    quizDuration: quizDuration,
                    stepsCompleted: anyhomeQuizState.currentStep,
                    totalSteps: anyhomeQuizState.totalSteps,
                    backButtonClicks: anyhomeQuizState.backButtonClicks || 0
                };
            }
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∏
            function anyhomeInitYandexMetrika() {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É –≤ —Ç–µ–∫—É—â–µ–º –æ–∫–Ω–µ
                if (typeof ym !== 'undefined') {
                    return true;
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –æ–∫–Ω–µ
                if (window.parent && window.parent !== window) {
                    try {
                        if (typeof window.parent.ym !== 'undefined') {
                            return true;
                        }
                    } catch (e) {
                        // –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–∫–Ω—É
                    }
                }
                
                console.log('–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
                return false;
            }
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É
            function anyhomeSendYandexEvent(eventName, eventParams = {}) {
                if (!anyhomeInitYandexMetrika()) {
                    console.log('–Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏—è:', eventName);
                    return;
                }
                
                try {
                    // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Ç–µ–∫—É—â–µ–º –æ–∫–Ω–µ
                    if (typeof ym !== 'undefined') {
                        ym(YANDEX_METRIKA_ID, 'reachGoal', eventName, eventParams);
                        console.log('–°–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É (—Ç–µ–∫—É—â–µ–µ –æ–∫–Ω–æ):', eventName, eventParams);
                        return;
                    }
                    
                    // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –æ–∫–Ω–µ
                    if (window.parent && window.parent !== window) {
                        try {
                            window.parent.ym(YANDEX_METRIKA_ID, 'reachGoal', eventName, eventParams);
                            console.log('–°–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É (—Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–µ –æ–∫–Ω–æ):', eventName, eventParams);
                            return;
                        } catch (e) {
                            console.log('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–µ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º –æ–∫–Ω–µ');
                            
                            // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ postMessage
                            try {
                                window.parent.postMessage({
                                    type: 'yandex_metrika_event',
                                    eventName: eventName,
                                    eventParams: eventParams,
                                    metrikaId: YANDEX_METRIKA_ID
                                }, '*');
                                console.log('–°–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ—Ä–µ–∑ postMessage:', eventName);
                                return;
                            } catch (postError) {
                                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ postMessage:', postError);
                            }
                        }
                    }
                    
                    console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É');
                } catch (error) {
                    console.error('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏—è –≤ –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫—É:', error);
                }
            }
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è –æ –∑–∞–ø—É—Å–∫–µ –∫–≤–∏–∑–∞
            function anyhomeSendQuizStartEvent() {
                // –ü–æ–ª—É—á–∞–µ–º URL —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                let currentPage, pageTitle;
                
                if (window.parent && window.parent !== window) {
                    try {
                        currentPage = window.parent.location.href;
                        pageTitle = window.parent.document.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                    } catch (e) {
                        currentPage = document.referrer || window.location.href;
                        pageTitle = '–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–π—Ç–∞';
                    }
                } else {
                    currentPage = window.location.href;
                    pageTitle = document.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                }
                
                const eventParams = {
                    'page_url': currentPage,
                    'page_title': pageTitle,
                    'quiz_type': 'anyhome_cost_calculator',
                    'timestamp': new Date().toISOString()
                };
                
                anyhomeSendYandexEvent('quiz_start', eventParams);
            }
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∫–≤–∏–∑–∞
            function anyhomeSendQuizCompleteEvent() {
                const data = anyhomeQuizState.data;
                
                // –ü–æ–ª—É—á–∞–µ–º URL —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                let currentPage, pageTitle;
                
                if (window.parent && window.parent !== window) {
                    try {
                        currentPage = window.parent.location.href;
                        pageTitle = window.parent.document.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                    } catch (e) {
                        currentPage = document.referrer || window.location.href;
                        pageTitle = '–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–π—Ç–∞';
                    }
                } else {
                    currentPage = window.location.href;
                    pageTitle = document.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                }
                
                const eventParams = {
                    'page_url': currentPage,
                    'page_title': pageTitle,
                    'quiz_type': 'anyhome_cost_calculator',
                    'user_name': data.contact.name || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                    'user_phone': data.contact.phone || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                    'contact_method': data.contact.method || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                    'rooms_count': data.rooms ? data.rooms.length : 0,
                    'rooms_selected': data.rooms ? data.rooms.join(', ') : '–ù–µ –≤—ã–±—Ä–∞–Ω–æ',
                    'area': data.area || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                    'furniture_count': data.furniture ? data.furniture.length : 0,
                    'furniture_selected': data.furniture ? data.furniture.join(', ') : '–ù–µ –≤—ã–±—Ä–∞–Ω–æ',
                    'style': data.style || '–ù–µ –≤—ã–±—Ä–∞–Ω',
                    'timeline': data.timeline || '–ù–µ —É–∫–∞–∑–∞–Ω–æ',
                    'completion_time': new Date().toISOString(),
                    'timestamp': new Date().toISOString()
                };
                
                anyhomeSendYandexEvent('quiz_complete', eventParams);
            }

            // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è Telegram
            function anyhomeFormatTelegramMessage() {
                const data = anyhomeQuizState.data;
                const roomsText = anyhomeGetRoomsText(data.rooms);
                const furnitureText = anyhomeGetFurnitureText(data.furniture);
                const styleText = anyhomeGetStyleText(data.style);
                const contactMethodText = anyhomeGetContactMethodText(data.contact.method);
                
                // –ü–æ–ª—É—á–∞–µ–º URL —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –µ—Å–ª–∏ –∫–≤–∏–∑ –≤ iframe
                let currentPage, pageTitle;
                
                if (window.parent && window.parent !== window) {
                    // –ö–≤–∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω –≤ iframe
                    try {
                        currentPage = window.parent.location.href;
                        pageTitle = window.parent.document.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                    } catch (e) {
                        // –ï—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É –æ–∫–Ω—É, –∏—Å–ø–æ–ª—å–∑—É–µ–º referrer
                        currentPage = document.referrer || window.location.href;
                        pageTitle = '–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–∞–π—Ç–∞';
                    }
                } else {
                    // –ö–≤–∏–∑ –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞–ø—Ä—è–º—É—é
                    currentPage = window.location.href;
                    pageTitle = document.title || '–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è';
                }
                
                // –ü–æ–ª—É—á–∞–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                const deviceInfo = anyhomeGetDeviceInfo();
                const trafficInfo = anyhomeGetTrafficInfo();
                const sessionInfo = anyhomeGetSessionInfo();
                const quizBehavior = anyhomeGetQuizBehavior();
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
                const formatTime = (seconds) => {
                    if (seconds < 60) return `${seconds} —Å–µ–∫`;
                    const minutes = Math.floor(seconds / 60);
                    const remainingSeconds = seconds % 60;
                    return `${minutes} –º–∏–Ω ${remainingSeconds} —Å–µ–∫`;
                };
                
                // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å —ç–º–æ–¥–∑–∏
                const deviceEmoji = deviceInfo.deviceType === 'mobile' ? 'üì±' : 
                                  deviceInfo.deviceType === 'tablet' ? 'üì±' : 'üíª';
                
                return `üè† <b>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å —Å–∞–π—Ç–∞ Any-Home</b>

üë§ <b>–ò–º—è:</b> ${data.contact.name}
üìû <b>–¢–µ–ª–µ—Ñ–æ–Ω:</b> ${data.contact.phone}
üì± <b>–°–ø–æ—Å–æ–± —Å–≤—è–∑–∏:</b> ${contactMethodText}

üè† <b>–ü–æ–º–µ—â–µ–Ω–∏—è:</b> ${roomsText}
üìê <b>–ü–ª–æ—â–∞–¥—å:</b> ${data.area || '–ù–µ —É–∫–∞–∑–∞–Ω–∞'} –º¬≤
ü™ë <b>–ú–µ–±–µ–ª—å:</b> ${furnitureText}
üé® <b>–°—Ç–∏–ª—å:</b> ${styleText}
‚è∞ <b>–°—Ä–æ–∫–∏:</b> ${anyhomeGetTimelineText(data.timeline)}

${deviceEmoji} <b>–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ:</b> ${deviceInfo.deviceType === 'mobile' ? '–ú–æ–±–∏–ª—å–Ω–æ–µ' : 
                                   deviceInfo.deviceType === 'tablet' ? '–ü–ª–∞–Ω—à–µ—Ç' : '–î–µ—Å–∫—Ç–æ–ø'} (${deviceInfo.os})
üíª <b>–ë—Ä–∞—É–∑–µ—Ä:</b> ${deviceInfo.browser}
üìê <b>–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ:</b> ${deviceInfo.screenResolution}
üåç <b>–Ø–∑—ã–∫:</b> ${deviceInfo.language}
üïê <b>–ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å:</b> ${deviceInfo.timezone}

‚è±Ô∏è <b>–í—Ä–µ–º—è –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è –∫–≤–∏–∑–∞:</b> ${formatTime(quizBehavior.quizDuration)}
üîÑ <b>–í–æ–∑–≤—Ä–∞—Ç–æ–≤ –Ω–∞–∑–∞–¥:</b> ${quizBehavior.backButtonClicks}
‚è≥ <b>–í—Ä–µ–º—è –Ω–∞ —Å–∞–π—Ç–µ –¥–æ –∫–≤–∏–∑–∞:</b> ${formatTime(sessionInfo.timeToQuiz)}

üîó <b>–ò—Å—Ç–æ—á–Ω–∏–∫:</b> ${trafficInfo.trafficSource} (${trafficInfo.trafficMedium})
üìÑ <b>Referrer:</b> ${trafficInfo.referrer}
${trafficInfo.utmCampaign ? `üéØ <b>UTM –∫–∞–º–ø–∞–Ω–∏—è:</b> ${trafficInfo.utmCampaign}` : ''}

üìÑ <b>–°—Ç—Ä–∞–Ω–∏—Ü–∞:</b> ${pageTitle}
üîó <b>URL:</b> ${currentPage}
üìÖ <b>–î–∞—Ç–∞:</b> ${new Date().toLocaleString('ru-RU')}`;
            }

            // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
            function anyhomeGetRoomsText(rooms) {
                const roomNames = {
                    'living': '–ì–æ—Å—Ç–∏–Ω–∞—è',
                    'bedroom': '–°–ø–∞–ª—å–Ω—è',
                    'kitchen': '–ö—É—Ö–Ω—è-—Å—Ç–æ–ª–æ–≤–∞—è',
                    'office': '–ö–∞–±–∏–Ω–µ—Ç',
                    'hallway': '–ü—Ä–∏—Ö–æ–∂–∞—è',
                    'all': '–í—Å—è –∫–≤–∞—Ä—Ç–∏—Ä–∞/–¥–æ–º'
                };
                return rooms.map(room => `‚Ä¢ ${roomNames[room] || room}`).join('\n') || '–ù–µ –≤—ã–±—Ä–∞–Ω–æ';
            }

            function anyhomeGetFurnitureText(furniture) {
                const furnitureNames = {
                    'shelves': '–°—Ç–µ–ª–ª–∞–∂–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã',
                    'tv': '–ú–µ–¥–∏–∞-–∫–æ–Ω—Å–æ–ª–∏ –∏ –¢–í-—Ç—É–º–±—ã',
                    'dressers': '–ö–æ–º–æ–¥—ã –∏ —Ç—É–º–±—ã',
                    'tables': '–°—Ç–æ–ª—ã –∏ –∫–æ–Ω—Å–æ–ª–∏',
                    'kitchen-furniture': '–ö—É—Ö–æ–Ω–Ω–∞—è –º–µ–±–µ–ª—å',
                    'island': '–û—Å—Ç—Ä–æ–≤ –∏ –±–∞—Ä–Ω–∞—è —Å—Ç–æ–π–∫–∞',
                    'storage': '–°–∏—Å—Ç–µ–º—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è',
                    'dining': '–û–±–µ–¥–µ–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞',
                    'wardrobes': '–®–∫–∞—Ñ—ã –∏ —Å—Ç–µ–ª–ª–∞–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã',
                    'islands': '–û—Å—Ç—Ä–æ–≤–Ω—ã–µ –º–æ–¥—É–ª–∏',
                    'lingerie': '–ö–æ–º–æ–¥—ã –¥–ª—è –±–µ–ª—å—è',
                    'mirrors': '–ó–µ—Ä–∫–∞–ª–∞ –∏ –ø—É—Ñ—ã',
                    'sofas': '–î–∏–≤–∞–Ω—ã –∏ –∫—É—à–µ—Ç–∫–∏',
                    'armchairs': '–ö—Ä–µ—Å–ª–∞ –∏ —à–µ–∑–ª–æ–Ω–≥–∏',
                    'ottomans': '–ü—É—Ñ—ã –∏ –±–∞–Ω–∫–µ—Ç–∫–∏',
                    'chandeliers': '–õ—é—Å—Ç—Ä—ã',
                    'sconces': '–ë—Ä–∞',
                    'floor-lamps': '–¢–æ—Ä—à–µ—Ä—ã',
                    'table-lamps': '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –ª–∞–º–ø—ã',
                    'decor-mirrors': '–ó–µ—Ä–∫–∞–ª–∞',
                    'accessories': '–ê–∫—Å–µ—Å—Å—É–∞—Ä—ã'
                };
                return furniture.map(item => `‚Ä¢ ${furnitureNames[item] || item}`).join('\n') || '–ù–µ –≤—ã–±—Ä–∞–Ω–æ';
            }

            function anyhomeGetStyleText(style) {
                const styleNames = {
                    'modern': '–ù–µ–æ–∫–ª–∞—Å—Å–∏–∫–∞',
                    'artdeco': '–ê—Ä-–¥–µ–∫–æ',
                    'contemporary': '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–ª–∞—Å—Å–∏–∫–∞',
                    'minimalist': '–ú–∏–Ω–∏–º–∞–ª–∏–∑–º',
                    'industrial': '–ò–Ω–¥—É—Å—Ç—Ä–∏–∞–ª—å–Ω—ã–π',
                    'undecided': '–ï—â–µ –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–∏–ª—Å—è'
                };
                return styleNames[style] || '–ù–µ –≤—ã–±—Ä–∞–Ω';
            }

            function anyhomeGetContactMethodText(method) {
                const methodNames = {
                    'whatsapp': 'WhatsApp',
                    'phone': '–ó–≤–æ–Ω–æ–∫'
                };
                return methodNames[method] || 'WhatsApp';
            }

            function anyhomeGetTimelineText(timeline) {
                const timelineNames = {
                    '2weeks': '–í —Ç–µ—á–µ–Ω–∏–µ 2 –Ω–µ–¥–µ–ª—å',
                    '1month': '–í —Ç–µ—á–µ–Ω–∏–µ –º–µ—Å—è—Ü–∞',
                    '3months': '–ß–µ—Ä–µ–∑ 1-3 –º–µ—Å—è—Ü–∞',
                    'studying': '–ü–æ–∫–∞ –∏–∑—É—á–∞—é –≤–∞—Ä–∏–∞–Ω—Ç—ã'
                };
                return timelineNames[timeline] || '–ù–µ —É–∫–∞–∑–∞–Ω–æ';
            }

            // WhatsApp –∏ –∑–≤–æ–Ω–æ–∫
            function anyhomeOpenWhatsApp() {
                const phoneNumber = '79938971045';
                const message = '–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø –ø—Ä–æ—à–µ–ª –∫–≤–∏–∑ –Ω–∞ —Å–∞–π—Ç–µ Any-Home –∏ —Ö–æ—á—É –ø–æ–ª—É—á–∏—Ç—å —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏–∏.';
                const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            }

            function anyhomeMakeCall() {
                window.location.href = 'tel:+79938971045';
            }

            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å—Ç–∞—Ç—É—Å–∞ –∫–≤–∏–∑–∞ (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
            function anyhomeResetQuizStatus() {
                sessionStorage.removeItem('anyhome-quiz-shown');
                console.log('–°—Ç–∞—Ç—É—Å –∫–≤–∏–∑–∞ —Å–±—Ä–æ—à–µ–Ω');
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–∫–∞–∑–∞ –∫–≤–∏–∑–∞ (–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç —Å—Ç–∞—Ç—É—Å)
            function anyhomeForceShowQuiz() {
                const overlay = document.getElementById('anyhome-quiz-overlay');
                if (overlay) {
                    overlay.style.display = 'flex';
                    anyhomeUpdateProgress();
                    console.log('–ö–≤–∏–∑ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–æ–∫–∞–∑–∞–Ω');
                }
            }

            // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è CS-Cart
            window.anyhomeShowQuiz = anyhomeShowQuiz;
            window.anyhomeCloseQuiz = anyhomeCloseQuiz;
            window.anyhomeNextStep = anyhomeNextStep;
            window.anyhomePrevStep = anyhomePrevStep;
            window.anyhomeSelectOption = anyhomeSelectOption;
            window.anyhomeSelectFurniture = anyhomeSelectFurniture;
            window.anyhomeSelectStyle = anyhomeSelectStyle;
            window.anyhomeSelectContactMethod = anyhomeSelectContactMethod;
            window.anyhomeSubmitQuiz = anyhomeSubmitQuiz;
            window.anyhomeOpenWhatsApp = anyhomeOpenWhatsApp;
            window.anyhomeMakeCall = anyhomeMakeCall;
            window.anyhomeResetQuizStatus = anyhomeResetQuizStatus;
            window.anyhomeForceShowQuiz = anyhomeForceShowQuiz;

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', anyhomeInitQuiz);
            } else {
                anyhomeInitQuiz();
            }
        })();
    </script>
</body>
</html>
